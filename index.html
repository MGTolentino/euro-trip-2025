<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Viaje - Europa 2025</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>✈️</text></svg>">
    
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getDatabase, ref, set, get, onValue, push, update } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAI2ofzM5BdlqK7glDAz5OPZ-L5Oslf_28",
            authDomain: "euro-trip-2025.firebaseapp.com",
            databaseURL: "https://euro-trip-2025-default-rtdb.firebaseio.com/",
            projectId: "euro-trip-2025",
            storageBucket: "euro-trip-2025.firebasestorage.app",
            messagingSenderId: "218713594766",
            appId: "1:218713594766:web:e84557d13d976e327d62df"
        };

        let app, database;
        let isFirebaseConnected = false;

        try {
            app = initializeApp(firebaseConfig);
            database = getDatabase(app);
            isFirebaseConnected = true;
        } catch (error) {
            console.error('Error Firebase:', error);
        }

        const initialData = {
            itinerario: [
                { id: 1, fecha: "2024-12-20", dia: "Sábado", ciudad: "Zurich", pais: "🇨🇭", llegada: "Vuelo MX", salida: "", noches: 1, hotel: "Hotel Zurich Centro", costoHotel: 15000, transporte: "Vuelo", costoTransporte: 50000, actividades: "Casco histórico, Lago Zurich", notas: "Desayuno incluido" },
                { id: 2, fecha: "2024-12-21", dia: "Domingo", ciudad: "Zurich/Lucerna", pais: "🇨🇭", llegada: "", salida: "", noches: 1, hotel: "Hotel Zurich Centro", costoHotel: 15000, transporte: "", costoTransporte: 0, actividades: "Excursión Lucerna", notas: "Día completo" },
                { id: 3, fecha: "2024-12-22", dia: "Lunes", ciudad: "Zurich → St Moritz", pais: "🇨🇭", llegada: "", salida: "Tren", noches: 0, hotel: "", costoHotel: 0, transporte: "Tren Zurich-St Moritz", costoTransporte: 8100, actividades: "Viaje panorámico", notas: "Tren redondo" },
                { id: 4, fecha: "2024-12-23", dia: "Martes", ciudad: "St Moritz", pais: "🇨🇭", llegada: "Desde Zurich", salida: "", noches: 2, hotel: "Hotel St Moritz", costoHotel: 25000, transporte: "", costoTransporte: 0, actividades: "Esquí, lago", notas: "Navidad en Alpes" },
                { id: 5, fecha: "2024-12-24", dia: "Miércoles", ciudad: "St Moritz", pais: "🇨🇭", llegada: "", salida: "", noches: 0, hotel: "", costoHotel: 0, transporte: "", costoTransporte: 0, actividades: "Nochebuena", notas: "" },
                { id: 6, fecha: "2024-12-25", dia: "Jueves", ciudad: "St Moritz → Milan", pais: "🇮🇹", llegada: "", salida: "Tren", noches: 0, hotel: "", costoHotel: 0, transporte: "Tren Directo Tirano-Milan", costoTransporte: 6000, actividades: "Viaje escénico", notas: "Navidad" },
                { id: 7, fecha: "2024-12-26", dia: "Viernes", ciudad: "Milan", pais: "🇮🇹", llegada: "Desde St Moritz", salida: "", noches: 1, hotel: "Hotel Milan", costoHotel: 12000, transporte: "", costoTransporte: 0, actividades: "Duomo, La Scala", notas: "Boxing Day" },
                { id: 8, fecha: "2024-12-27", dia: "Sábado", ciudad: "Milan → Turin", pais: "🇮🇹", llegada: "", salida: "Tren", noches: 1, hotel: "Hotel Turin", costoHotel: 8000, transporte: "Tren Milan-Turin", costoTransporte: 2000, actividades: "Centro histórico", notas: "" },
                { id: 9, fecha: "2024-12-28", dia: "Domingo", ciudad: "Turin → Florencia", pais: "🇮🇹", llegada: "", salida: "Tren", noches: 4, hotel: "Hotel Florencia", costoHotel: 15000, transporte: "Tren Turin-Florencia", costoTransporte: 1700, actividades: "Uffizi, Ponte Vecchio", notas: "4 noches" },
                { id: 10, fecha: "2024-12-29", dia: "Lunes", ciudad: "Florencia", pais: "🇮🇹", llegada: "", salida: "", noches: 0, hotel: "", costoHotel: 0, transporte: "", costoTransporte: 0, actividades: "David, Duomo", notas: "" },
                { id: 11, fecha: "2024-12-30", dia: "Martes", ciudad: "Florencia → Pisa", pais: "🇮🇹", llegada: "", salida: "Tren", noches: 1, hotel: "Hotel Pisa", costoHotel: 7500, transporte: "Tren Florencia-Pisa", costoTransporte: 900, actividades: "Torre inclinada", notas: "" },
                { id: 12, fecha: "2024-12-31", dia: "Miércoles", ciudad: "Pisa → Roma", pais: "🇮🇹", llegada: "", salida: "Tren", noches: 3, hotel: "Hotel Roma", costoHotel: 26000, transporte: "Tren Pisa-Roma", costoTransporte: 2500, actividades: "Coliseo, Vaticano", notas: "Año Nuevo" },
                { id: 13, fecha: "2025-01-01", dia: "Jueves", ciudad: "Roma", pais: "🇮🇹", llegada: "", salida: "", noches: 0, hotel: "", costoHotel: 0, transporte: "", costoTransporte: 0, actividades: "Año Nuevo", notas: "" },
                { id: 14, fecha: "2025-01-02", dia: "Viernes", ciudad: "Roma → Venecia", pais: "🇮🇹", llegada: "", salida: "Tren", noches: 2, hotel: "Hotel Venecia", costoHotel: 23000, transporte: "Tren Roma-Venecia", costoTransporte: 3000, actividades: "San Marcos, Dux", notas: "" },
                { id: 15, fecha: "2025-01-03", dia: "Sábado", ciudad: "Venecia", pais: "🇮🇹", llegada: "", salida: "", noches: 0, hotel: "", costoHotel: 0, transporte: "", costoTransporte: 0, actividades: "Gondola, Rialto", notas: "" },
                { id: 16, fecha: "2025-01-04", dia: "Domingo", ciudad: "Venecia → Verona", pais: "🇮🇹", llegada: "", salida: "Tren", noches: 1, hotel: "Hotel Verona", costoHotel: 7000, transporte: "Tren Venecia-Verona", costoTransporte: 1000, actividades: "Romeo y Julieta", notas: "" },
                { id: 17, fecha: "2025-01-05", dia: "Lunes", ciudad: "Verona → Zurich", pais: "🇨🇭", llegada: "", salida: "Tren", noches: 1, hotel: "Hotel Aeropuerto", costoHotel: 2700, transporte: "Tren Verona-Zurich", costoTransporte: 6000, actividades: "Último día", notas: "" },
                { id: 18, fecha: "2025-01-06", dia: "Martes", ciudad: "Zurich → México", pais: "🇲🇽", llegada: "", salida: "18:30 vuelo", noches: 0, hotel: "", costoHotel: 0, transporte: "Vuelo regreso", costoTransporte: 36300, actividades: "Vuelo de regreso", notas: "6:30pm salida" }
            ],
            gastos: [],
            actividades: {}
        };

        let viajeData = {};

        async function saveData(path, data) {
            if (isFirebaseConnected) {
                try {
                    await set(ref(database, path), data);
                } catch (error) {
                    console.error('Error guardando:', error);
                }
            }
        }

        async function loadData(path) {
            if (isFirebaseConnected) {
                try {
                    const snapshot = await get(ref(database, path));
                    return snapshot.exists() ? snapshot.val() : null;
                } catch (error) {
                    console.error('Error cargando:', error);
                }
            }
            return null;
        }

        window.addEventListener('DOMContentLoaded', async function() {
            const savedData = await loadData('viajeData');
            viajeData = savedData || initialData;
            
            if (!savedData) {
                await saveData('viajeData', viajeData);
            }

            renderApp();
        });

        function renderApp() {
            const app = document.getElementById('app');
            app.innerHTML = `
                <div class="header">
                    <h1>🌍 Viaje Europa 2025</h1>
                    <div class="stats">
                        <span class="stat">📅 18 días</span>
                        <span class="stat">🏙️ 8 ciudades</span>
                        <span class="stat">💰 $${calcularTotal().toLocaleString()}</span>
                        <span class="stat ${isFirebaseConnected ? 'connected' : 'offline'}">
                            ${isFirebaseConnected ? '🟢 Online' : '🔴 Offline'}
                        </span>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" onclick="showTab('itinerario')">📋 Itinerario</button>
                    <button class="tab-btn" onclick="showTab('presupuesto')">💰 Presupuesto</button>
                    <button class="tab-btn" onclick="showTab('gastos')">🧾 Gastos</button>
                </div>

                <div id="itinerario" class="tab-content active">
                    ${renderItinerario()}
                </div>
                
                <div id="presupuesto" class="tab-content">
                    ${renderPresupuesto()}
                </div>
                
                <div id="gastos" class="tab-content">
                    ${renderGastos()}
                </div>
            `;
        }

        function renderItinerario() {
            return `
                <div class="table-container">
                    <table class="itinerario-table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Día</th>
                                <th>Ciudad</th>
                                <th>Noches</th>
                                <th>Transporte</th>
                                <th>Costo</th>
                                <th>Hotel</th>
                                <th>Costo</th>
                                <th>Actividades</th>
                                <th>Notas</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            ${viajeData.itinerario.map(dia => `
                                <tr class="day-row">
                                    <td class="fecha">${formatDateShort(dia.fecha)}</td>
                                    <td>${dia.dia}</td>
                                    <td class="ciudad">${dia.pais} ${dia.ciudad}</td>
                                    <td class="center">${dia.noches || '-'}</td>
                                    <td class="transporte">${dia.transporte || '-'}</td>
                                    <td class="costo">${dia.costoTransporte > 0 ? '$' + dia.costoTransporte.toLocaleString() : '-'}</td>
                                    <td class="hotel">${dia.hotel || '-'}</td>
                                    <td class="costo">${dia.costoHotel > 0 ? '$' + dia.costoHotel.toLocaleString() : '-'}</td>
                                    <td class="actividades">${dia.actividades}</td>
                                    <td class="notas">${dia.notas || '-'}</td>
                                    <td class="actions">
                                        <button onclick="editRow(${dia.id})" class="btn-edit">✏️</button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                
                <div class="actions-bar">
                    <button onclick="addExpense()" class="btn-primary">➕ Agregar Gasto</button>
                    <button onclick="exportItinerary()" class="btn-secondary">📤 Exportar</button>
                </div>
            `;
        }

        function renderPresupuesto() {
            const totales = calcularTotales();
            
            return `
                <div class="budget-grid">
                    <div class="budget-card total">
                        <h3>💰 Total del Viaje</h3>
                        <div class="amount">$${totales.total.toLocaleString()}</div>
                    </div>
                    
                    <div class="budget-card">
                        <h4>🚂 Transporte</h4>
                        <div class="amount">$${totales.transporte.toLocaleString()}</div>
                        <div class="percentage">${((totales.transporte/totales.total)*100).toFixed(1)}%</div>
                    </div>
                    
                    <div class="budget-card">
                        <h4>🏨 Alojamiento</h4>
                        <div class="amount">$${totales.alojamiento.toLocaleString()}</div>
                        <div class="percentage">${((totales.alojamiento/totales.total)*100).toFixed(1)}%</div>
                    </div>
                    
                    <div class="budget-card">
                        <h4>🍽️ Comida (Est.)</h4>
                        <div class="amount">$${totales.comidaEstimada.toLocaleString()}</div>
                        <div class="percentage">${((totales.comidaEstimada/totales.total)*100).toFixed(1)}%</div>
                    </div>
                </div>

                <div class="budget-breakdown">
                    <h3>Desglose por Ciudad</h3>
                    <table class="budget-table">
                        <thead>
                            <tr>
                                <th>Ciudad</th>
                                <th>Noches</th>
                                <th>Transporte</th>
                                <th>Hotel</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${getCiudadesResumen().map(ciudad => `
                                <tr>
                                    <td>${ciudad.nombre}</td>
                                    <td class="center">${ciudad.noches}</td>
                                    <td class="costo">$${ciudad.transporte.toLocaleString()}</td>
                                    <td class="costo">$${ciudad.hotel.toLocaleString()}</td>
                                    <td class="costo total-cell">$${(ciudad.transporte + ciudad.hotel).toLocaleString()}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function renderGastos() {
            return `
                <div class="gastos-container">
                    <div class="gastos-header">
                        <h3>🧾 Gastos del Viaje</h3>
                        <button onclick="addExpense()" class="btn-primary">➕ Nuevo Gasto</button>
                    </div>
                    
                    <div class="gastos-grid">
                        ${(viajeData.gastos || []).map(gasto => `
                            <div class="gasto-card">
                                <div class="gasto-header">
                                    <span class="categoria">${gasto.categoria}</span>
                                    <span class="monto">$${gasto.monto.toLocaleString()}</span>
                                </div>
                                <div class="gasto-detalle">
                                    <p><strong>${gasto.descripcion}</strong></p>
                                    <p>${gasto.ciudad} - ${formatDateShort(gasto.fecha)}</p>
                                </div>
                                <button onclick="deleteExpense('${gasto.id}')" class="btn-delete">🗑️</button>
                            </div>
                        `).join('')}
                        
                        ${(viajeData.gastos || []).length === 0 ? '<p class="empty-state">No hay gastos registrados</p>' : ''}
                    </div>
                </div>
            `;
        }

        function calcularTotal() {
            return viajeData.itinerario.reduce((sum, dia) => sum + dia.costoTransporte + dia.costoHotel, 0);
        }

        function calcularTotales() {
            const transporte = viajeData.itinerario.reduce((sum, dia) => sum + dia.costoTransporte, 0);
            const alojamiento = viajeData.itinerario.reduce((sum, dia) => sum + dia.costoHotel, 0);
            const comidaEstimada = 18 * 2500; // 18 días * $2500 por día
            
            return {
                transporte,
                alojamiento,
                comidaEstimada,
                total: transporte + alojamiento + comidaEstimada
            };
        }

        function getCiudadesResumen() {
            const ciudades = {};
            
            viajeData.itinerario.forEach(dia => {
                const ciudad = dia.ciudad.split(' ')[0]; // Tomar solo primera palabra
                if (!ciudades[ciudad]) {
                    ciudades[ciudad] = { nombre: ciudad, noches: 0, transporte: 0, hotel: 0 };
                }
                ciudades[ciudad].noches += dia.noches || 0;
                ciudades[ciudad].transporte += dia.costoTransporte || 0;
                ciudades[ciudad].hotel += dia.costoHotel || 0;
            });
            
            return Object.values(ciudades).filter(c => c.noches > 0 || c.transporte > 0 || c.hotel > 0);
        }

        function formatDateShort(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit' });
        }

        // Funciones globales
        window.showTab = function(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        };

        window.editRow = function(id) {
            const dia = viajeData.itinerario.find(d => d.id === id);
            if (!dia) return;
            
            const newActividades = prompt('Actividades:', dia.actividades);
            if (newActividades !== null) {
                dia.actividades = newActividades;
                saveData('viajeData', viajeData);
                renderApp();
            }
        };

        window.addExpense = function() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>➕ Nuevo Gasto</h3>
                    <form id="expenseForm">
                        <div class="form-group">
                            <label>Descripción:</label>
                            <input type="text" id="descripcion" required>
                        </div>
                        <div class="form-group">
                            <label>Monto:</label>
                            <input type="number" id="monto" required>
                        </div>
                        <div class="form-group">
                            <label>Categoría:</label>
                            <select id="categoria">
                                <option value="🍽️ Comida">🍽️ Comida</option>
                                <option value="🎯 Actividades">🎯 Actividades</option>
                                <option value="🛍️ Compras">🛍️ Compras</option>
                                <option value="🚗 Transporte local">🚗 Transporte local</option>
                                <option value="💊 Otros">💊 Otros</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ciudad:</label>
                            <select id="ciudad">
                                ${[...new Set(viajeData.itinerario.map(d => d.ciudad.split(' ')[0]))].map(c => 
                                    `<option value="${c}">${c}</option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Fecha:</label>
                            <input type="date" id="fechaGasto" value="${new Date().toISOString().split('T')[0]}">
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">💾 Guardar</button>
                            <button type="button" onclick="closeModal()" class="btn-secondary">❌ Cancelar</button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            document.getElementById('expenseForm').onsubmit = function(e) {
                e.preventDefault();
                
                const gasto = {
                    id: Date.now().toString(),
                    descripcion: document.getElementById('descripcion').value,
                    monto: parseInt(document.getElementById('monto').value),
                    categoria: document.getElementById('categoria').value,
                    ciudad: document.getElementById('ciudad').value,
                    fecha: document.getElementById('fechaGasto').value
                };
                
                if (!viajeData.gastos) viajeData.gastos = [];
                viajeData.gastos.push(gasto);
                
                saveData('viajeData', viajeData);
                closeModal();
                renderApp();
            };
        };

        window.closeModal = function() {
            const modal = document.querySelector('.modal');
            if (modal) modal.remove();
        };

        window.deleteExpense = function(id) {
            if (confirm('¿Eliminar este gasto?')) {
                viajeData.gastos = viajeData.gastos.filter(g => g.id !== id);
                saveData('viajeData', viajeData);
                renderApp();
            }
        };

        window.exportItinerary = function() {
            const data = JSON.stringify(viajeData, null, 2);
            const blob = new Blob([data], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'viaje-europa-2025.json';
            a.click();
        };
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }
        
        .header {
            background: white;
            padding: 20px 30px;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 0;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #0f172a;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .stat {
            padding: 6px 12px;
            background: #f1f5f9;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .connected {
            background: #dcfce7;
            color: #166534;
        }
        
        .offline {
            background: #fef2f2;
            color: #dc2626;
        }
        
        .tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .tab-btn {
            padding: 16px 24px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #64748b;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .tab-btn:hover {
            color: #3b82f6;
            background: #f8fafc;
        }
        
        .tab-btn.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: #f8fafc;
        }
        
        .tab-content {
            display: none;
            padding: 0;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .table-container {
            background: white;
            overflow-x: auto;
            border-radius: 0;
        }
        
        .itinerario-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        .itinerario-table th {
            background: #f8fafc;
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
            font-size: 12px;
            white-space: nowrap;
        }
        
        .itinerario-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #f3f4f6;
            vertical-align: top;
        }
        
        .day-row:hover {
            background: #fafbfc;
        }
        
        .fecha {
            font-weight: 600;
            color: #3b82f6;
            min-width: 50px;
        }
        
        .ciudad {
            font-weight: 500;
            min-width: 120px;
        }
        
        .center {
            text-align: center;
        }
        
        .costo {
            text-align: right;
            font-weight: 500;
            color: #059669;
            min-width: 80px;
        }
        
        .transporte, .hotel {
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .actividades {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .notas {
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #6b7280;
        }
        
        .actions {
            width: 60px;
            text-align: center;
        }
        
        .btn-edit {
            background: none;
            border: 1px solid #d1d5db;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .btn-edit:hover {
            background: #f3f4f6;
        }
        
        .actions-bar {
            background: white;
            padding: 20px 30px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 12px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }
        
        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }
        
        .budget-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 20px;
            padding: 30px;
            background: white;
        }
        
        .budget-card {
            padding: 24px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        
        .budget-card.total {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
        }
        
        .budget-card h3, .budget-card h4 {
            font-size: 14px;
            margin-bottom: 8px;
            opacity: 0.9;
        }
        
        .amount {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .budget-card:not(.total) .amount {
            color: #059669;
        }
        
        .percentage {
            font-size: 12px;
            opacity: 0.7;
        }
        
        .budget-breakdown {
            padding: 0 30px 30px;
            background: white;
        }
        
        .budget-breakdown h3 {
            margin-bottom: 20px;
            font-size: 18px;
            color: #0f172a;
        }
        
        .budget-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .budget-table th, .budget-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .budget-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
        }
        
        .total-cell {
            font-weight: 600;
            background: #f0fdf4;
        }
        
        .gastos-container {
            padding: 30px;
            background: white;
        }
        
        .gastos-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .gastos-header h3 {
            font-size: 18px;
            color: #0f172a;
        }
        
        .gastos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }
        
        .gasto-card {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            position: relative;
        }
        
        .gasto-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .categoria {
            background: #f1f5f9;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .monto {
            font-weight: 600;
            color: #dc2626;
        }
        
        .gasto-detalle p {
            margin: 4px 0;
            font-size: 14px;
        }
        
        .gasto-detalle p:last-child {
            color: #6b7280;
            font-size: 12px;
        }
        
        .btn-delete {
            position: absolute;
            top: 8px;
            right: 8px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
        }
        
        .btn-delete:hover {
            background: #fee2e2;
        }
        
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            color: #6b7280;
            padding: 40px;
            font-style: italic;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
        }
        
        .modal-content h3 {
            margin-bottom: 20px;
            color: #0f172a;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
            color: #374151;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-buttons {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 16px 20px;
            }
            
            .stats {
                gap: 12px;
            }
            
            .tab-btn {
                padding: 12px 16px;
                font-size: 13px;
            }
            
            .itinerario-table {
                font-size: 12px;
            }
            
            .itinerario-table th, .itinerario-table td {
                padding: 8px 4px;
            }
            
            .budget-grid {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .actions-bar, .gastos-container, .budget-breakdown {
                padding: 20px;
            }
            
            .gastos-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="header">
            <h2>Cargando...</h2>
        </div>
    </div>
</body>
</html>
